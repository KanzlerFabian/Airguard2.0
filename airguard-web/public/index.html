<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#0ea5e9">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>AirGuard Dashboard</title>
  <link rel="manifest" href="/manifest.webmanifest">
  <link rel="icon" type="image/png" href="/assets/logo.png">
  <link rel="apple-touch-icon" href="/assets/logo.png">
  <link rel="stylesheet" href="./styles.css">
  <script defer src="./lib/chart.umd.min.js"></script>
  <script defer src="./lib/chartjs-adapter-date-fns.bundle.min.js"></script>
  <script defer src="./app.js"></script>
</head>
  <body>
  <svg class="icon-sprite" aria-hidden="true">
    <symbol id="icon-cloud" viewBox="0 0 24 24">
      <path d="M7.5 19a4.5 4.5 0 0 1 0-9 5.5 5.5 0 0 1 10.8-1.6A4 4 0 0 1 18 19z" fill="currentColor" />
    </symbol>
    <symbol id="icon-dots" viewBox="0 0 24 24">
      <circle cx="6" cy="6" r="2.4" fill="currentColor" />
      <circle cx="12" cy="6" r="2.4" fill="currentColor" />
      <circle cx="18" cy="6" r="2.4" fill="currentColor" />
      <circle cx="6" cy="12" r="2.4" fill="currentColor" />
      <circle cx="12" cy="12" r="2.4" fill="currentColor" />
      <circle cx="18" cy="12" r="2.4" fill="currentColor" />
      <circle cx="6" cy="18" r="2.4" fill="currentColor" />
      <circle cx="12" cy="18" r="2.4" fill="currentColor" />
      <circle cx="18" cy="18" r="2.4" fill="currentColor" />
    </symbol>
    <symbol id="icon-flask" viewBox="0 0 24 24">
      <path d="M9 3.5h6v1.6l-1.6 2.4v4.2l4.6 7a1.6 1.6 0 0 1-1.3 2.6H7.3A1.6 1.6 0 0 1 6 18.7l4.6-7V7.5L9 5.1z" fill="currentColor" />
    </symbol>
    <symbol id="icon-thermometer" viewBox="0 0 24 24">
      <path d="M13.2 14.9V5.6a1.2 1.2 0 0 0-2.4 0v9.3a3.5 3.5 0 1 0 2.4 0z" fill="currentColor" />
      <path d="M10.8 6h2.4v2.2h-2.4z" fill="currentColor" />
    </symbol>
    <symbol id="icon-droplet" viewBox="0 0 24 24">
      <path d="M12 3.2C9.2 7 6 10.5 6 14a6 6 0 0 0 12 0c0-3.5-3.2-7-6-10.8z" fill="currentColor" />
    </symbol>
    <symbol id="icon-gauge" viewBox="0 0 24 24">
      <path d="M12 4a9 9 0 1 0 9 9h-3a6 6 0 1 1-12 0H3a9 9 0 0 0 9-9z" fill="currentColor" />
      <path d="M12 7a1 1 0 0 0-1 1v5.4l-2.1 2.1a1 1 0 1 0 1.4 1.4l2.5-2.5a1 1 0 0 0 .3-.7V8a1 1 0 0 0-1-1z" fill="#fff" />
    </symbol>
    <symbol id="icon-sun" viewBox="0 0 24 24">
      <circle cx="12" cy="12" r="4.5" fill="currentColor" />
      <path d="M12 2.5a1.2 1.2 0 0 1 1.2 1.2v1.2A1.2 1.2 0 0 1 12 6a1.2 1.2 0 0 1-1.2-1.2V3.7A1.2 1.2 0 0 1 12 2.5zm0 16.5a1.2 1.2 0 0 1 1.2 1.2v1.1a1.2 1.2 0 1 1-2.4 0v-1.1A1.2 1.2 0 0 1 12 19zm9.5-7a1.2 1.2 0 0 1-1.2 1.2h-1.1a1.2 1.2 0 0 1 0-2.4h1.1a1.2 1.2 0 0 1 1.2 1.2zm-16.5 0a1.2 1.2 0 0 1-1.2 1.2H2.7a1.2 1.2 0 0 1 0-2.4h1.1a1.2 1.2 0 0 1 1.2 1.2zm13.9 5.3a1.2 1.2 0 0 1 0 1.7l-.8.8a1.2 1.2 0 0 1-1.7-1.7l.8-.8a1.2 1.2 0 0 1 1.7 0zM7.6 6.5a1.2 1.2 0 0 1 0 1.7l-.8.8A1.2 1.2 0 0 1 5 7.3l.8-.8a1.2 1.2 0 0 1 1.7 0zm0 10.9-1 .9a1.2 1.2 0 0 1-1.7-1.7l.9-1a1.2 1.2 0 1 1 1.7 1.7zm10.9-10.9a1.2 1.2 0 0 1-1.7 0l-.8-.8a1.2 1.2 0 0 1 1.7-1.7l.8.8a1.2 1.2 0 0 1 0 1.7z" fill="currentColor" />
    </symbol>
    <symbol id="icon-gradient-sun" viewBox="0 0 24 24">
      <path d="M12 4a8 8 0 1 1-7.7 6.1h6.6V4.3A8 8 0 0 1 12 4z" fill="currentColor" />
      <path d="M13 4.2v5.9h5.9A8 8 0 0 0 13 4.2z" fill="currentColor" opacity="0.65" />
    </symbol>
  </svg>
  <div class="app-shell">
    <header class="hero" aria-labelledby="hero-title">
      <div class="hero-cards-grid">
        <section class="hero-card hero-score-card" aria-labelledby="hero-title">
          <div class="hero-card__header">
            <div>
              <h1 id="hero-title">AirGuard Innenraum-Qualität</h1>
              <p class="hero-sub">Heute · Überblick deiner Innenraumluft</p>
            </div>
            <p class="hero-update">Letzte Aktualisierung: <time id="last-updated">—</time></p>
          </div>

          <div class="health-card" role="status" aria-live="polite">
            <div class="health-ring" aria-hidden="true">
              <svg viewBox="0 0 120 120">
                <defs>
                  <linearGradient id="health-gradient" x1="0" y1="1" x2="1" y2="0">
                    <stop offset="0%" stop-color="#06b6d4" />
                    <stop offset="100%" stop-color="#10b981" />
                  </linearGradient>
                </defs>
                <circle class="health-bg" cx="60" cy="60" r="54"></circle>
                <circle class="health-progress" cx="60" cy="60" r="54" stroke-dasharray="339.292" stroke-dashoffset="339.292"></circle>
              </svg>
              <div class="health-value">
                <span id="health-score" class="health-score">—</span>
                <span id="health-label" class="health-label">Nicht verfügbar</span>
              </div>
            </div>
            <div class="hero-mini-meta">
              <p id="health-detail" class="health-detail">Aktuelle Luftqualität basierend auf CO₂, TVOC, Temperatur und Luftfeuchtigkeit.</p>
              <span class="trend-pill" id="hero-score-trend" aria-live="polite">→ Stabil</span>
            </div>
          </div>
        </section>

        <section class="hero-card hero-summary-card" aria-labelledby="hero-summary-title">
          <div class="hero-summary__head">
            <div>
              <p class="eyebrow">Überblick</p>
              <h2 id="hero-summary-title">Luft im Blick</h2>
            </div>
            <span class="trend-pill" id="hero-trend" aria-live="polite">→ Stabil</span>
          </div>
          <p id="hero-summary-text" class="hero-summary__text">Wird geladen …</p>
          <ul id="hero-highlights" class="hero-highlights" aria-label="Wichtigste Punkte"></ul>
          <div class="hero-summary__meta">
            <span class="summary-label" id="hero-summary-label">—</span>
            <div class="hero-actions">
              <button id="install-btn" type="button" class="ghost-btn" hidden>App installieren</button>
              <button id="notify-btn" type="button" class="ghost-btn" hidden>Benachrichtigungen aktivieren</button>
              <span id="pwa-status-badge" class="settings-badge" hidden>Offline-Cache deaktiviert (kein gültiges Zertifikat)</span>
            </div>
          </div>
        </section>

        <section class="hero-card hero-key-card" aria-labelledby="hero-metrics-title">
          <div class="hero-card__header">
            <div>
              <p class="eyebrow">Kernmetriken</p>
              <h2 id="hero-metrics-title">Luft & Komfort im Blick</h2>
            </div>
          </div>
          <div class="hero-key-metrics">
            <article class="core-card core-metric-card core-card--compact skeleton" data-metric="CO2">
              <div class="core-label">
                <span class="pill-icon" aria-hidden="true"><svg><use href="#icon-cloud" /></svg></span>
                <div class="core-text">
                  <span class="core-name">CO₂</span>
                  <span class="core-unit">ppm</span>
                </div>
              </div>
              <div class="core-value">
                <span class="core-number">—</span>
                <span class="core-badge" data-tone="neutral">—</span>
              </div>
              <div class="core-spark" aria-hidden="true">
                <canvas></canvas>
              </div>
            </article>
            <article class="core-card core-metric-card core-card--compact skeleton" data-metric="TVOC">
              <div class="core-label">
                <span class="pill-icon" aria-hidden="true"><svg><use href="#icon-flask" /></svg></span>
                <div class="core-text">
                  <span class="core-name">TVOC</span>
                  <span class="core-unit">ppb</span>
                </div>
              </div>
              <div class="core-value">
                <span class="core-number">—</span>
                <span class="core-badge" data-tone="neutral">—</span>
              </div>
              <div class="core-spark" aria-hidden="true">
                <canvas></canvas>
              </div>
            </article>
            <article class="core-card core-metric-card core-card--compact skeleton" data-metric="Temperatur">
              <div class="core-label">
                <span class="pill-icon" aria-hidden="true"><svg><use href="#icon-thermometer" /></svg></span>
                <div class="core-text">
                  <span class="core-name">Temperatur</span>
                  <span class="core-unit">°C</span>
                </div>
              </div>
              <div class="core-value">
                <span class="core-number">—</span>
                <span class="core-badge" data-tone="neutral">—</span>
              </div>
              <div class="core-spark" aria-hidden="true">
                <canvas></canvas>
              </div>
            </article>
            <article class="core-card core-metric-card core-card--compact skeleton" data-metric="rel. Feuchte">
              <div class="core-label">
                <span class="pill-icon" aria-hidden="true"><svg><use href="#icon-droplet" /></svg></span>
                <div class="core-text">
                  <span class="core-name">rel. Feuchte</span>
                  <span class="core-unit">%</span>
                </div>
              </div>
              <div class="core-value">
                <span class="core-number">—</span>
                <span class="core-badge" data-tone="neutral">—</span>
              </div>
              <div class="core-spark" aria-hidden="true">
                <canvas></canvas>
              </div>
            </article>
          </div>
        </section>
      </div>
    </header>

    <main class="main-content">
      <section class="circadian-section" aria-labelledby="circadian-heading">
        <div class="section-heading">
          <h2 id="circadian-heading">Circadianes Licht</h2>
          <p>Kurzer Überblick für Lux & Farbtemperatur</p>
        </div>
        <article class="circadian-card skeleton" data-chart-target="Circadian">
          <div class="circadian-main">
            <span class="circadian-icon" aria-hidden="true"><svg><use href="#icon-gradient-sun" /></svg></span>
            <div class="circadian-copy">
              <p class="circadian-phase">Phase wird geladen …</p>
              <h3 class="circadian-status">—</h3>
              <p class="circadian-tip">—</p>
            </div>
          </div>
          <div class="circadian-cycle">
            <div class="cycle-track" aria-hidden="true">
              <span class="cycle-icon cycle-icon--sun" aria-hidden="true">☀</span>
              <span class="cycle-icon cycle-icon--moon" aria-hidden="true">☾</span>
              <span class="cycle-marker" data-period="day">☀</span>
            </div>
            <div class="cycle-labels">
              <span>00:00</span>
              <span id="circadian-cycle-label">—:—</span>
              <span>24:00</span>
            </div>
          </div>
          <div class="circadian-badges">
            <span id="lux-eval" class="badge" data-tone="neutral">Lux</span>
            <span id="cct-eval" class="badge" data-tone="neutral">CCT</span>
          </div>
          <div class="circadian-bars">
            <div class="bar-group">
              <div class="bar-label">CCT</div>
              <div class="bar-track" data-kind="cct" data-range-label="Ziel —">
                <span class="bar-range"></span>
                <span class="bar-marker"></span>
              </div>
              <div class="bar-meta">
                <span id="cct-now">— K</span>
                <span id="cct-target">Ziel —</span>
                <span><span class="badge" data-tone="neutral">Heute</span></span>
              </div>
            </div>
            <div class="bar-group">
              <div class="bar-label">Lux</div>
              <div class="bar-track" data-kind="lux" data-range-label="Ziel —">
                <span class="bar-range"></span>
                <span class="bar-marker"></span>
              </div>
              <div class="bar-meta">
                <span id="lux-now">— lx</span>
                <span id="lux-target">Ziel —</span>
                <span><span class="badge" data-tone="neutral">Balance</span></span>
              </div>
            </div>
          </div>
        </article>
      </section>

      <section class="status-section" aria-labelledby="status-heading">
        <div class="section-heading">
          <h2 id="status-heading">Statusübersicht</h2>
          <p>Aktuelle Werte mit Komfort- und Qualitätsbewertung</p>
        </div>
        <div class="status-grid">
          <article class="status-card skeleton" data-metric="CO2" data-chart-target="CO2">
            <div class="status-card__top">
              <div class="metric-label">
                <span class="metric-icon" aria-hidden="true"><svg><use href="#icon-cloud" /></svg></span>
                <div class="metric-head">
                  <h3>CO₂</h3>
                  <span class="unit">ppm</span>
                </div>
              </div>
              <div class="metric-meta">
                <span class="trend" aria-live="polite">—</span>
                <span class="badge" data-tone="neutral">Lädt …</span>
              </div>
            </div>
            <p class="status-value"><span class="value">—</span> <span class="unit">ppm</span></p>
            <div class="status-notes">
              <p class="status-note">—</p>
              <p class="status-tip">—</p>
            </div>
          </article>
          <article class="status-card skeleton" data-metric="TVOC" data-chart-target="TVOC">
            <div class="status-card__top">
              <div class="metric-label">
                <span class="metric-icon" aria-hidden="true"><svg><use href="#icon-flask" /></svg></span>
                <div class="metric-head">
                  <h3>TVOC</h3>
                  <span class="unit">ppb</span>
                </div>
              </div>
              <div class="metric-meta">
                <span class="trend" aria-live="polite">—</span>
                <span class="badge" data-tone="neutral">Lädt …</span>
              </div>
            </div>
            <p class="status-value"><span class="value">—</span> <span class="unit">ppb</span></p>
            <div class="status-notes">
              <p class="status-note">—</p>
              <p class="status-tip">—</p>
            </div>
          </article>
          <article class="status-card skeleton" data-metric="PM2.5" data-chart-target="PM">
            <div class="status-card__top">
              <div class="metric-label">
                <span class="metric-icon" aria-hidden="true"><svg><use href="#icon-dots" /></svg></span>
                <div class="metric-head">
                  <h3>PM2.5</h3>
                  <span class="unit">µg/m³</span>
                </div>
              </div>
              <div class="metric-meta">
                <span class="trend" aria-live="polite">—</span>
                <span class="badge" data-tone="neutral">Lädt …</span>
              </div>
            </div>
            <p class="status-value"><span class="value">—</span> <span class="unit">µg/m³</span></p>
            <div class="status-notes">
              <p class="status-note">—</p>
              <p class="status-tip">—</p>
            </div>
          </article>
          <article class="status-card skeleton" data-metric="PM1.0" data-chart-target="PM">
            <div class="status-card__top">
              <div class="metric-label">
                <span class="metric-icon" aria-hidden="true"><svg><use href="#icon-dots" /></svg></span>
                <div class="metric-head">
                  <h3>PM1</h3>
                  <span class="unit">µg/m³</span>
                </div>
              </div>
              <div class="metric-meta">
                <span class="trend" aria-live="polite">—</span>
                <span class="badge" data-tone="neutral">Lädt …</span>
              </div>
            </div>
            <p class="status-value"><span class="value">—</span> <span class="unit">µg/m³</span></p>
            <div class="status-notes">
              <p class="status-note">—</p>
              <p class="status-tip">—</p>
            </div>
          </article>
          <article class="status-card skeleton" data-metric="PM10" data-chart-target="PM">
            <div class="status-card__top">
              <div class="metric-label">
                <span class="metric-icon" aria-hidden="true"><svg><use href="#icon-dots" /></svg></span>
                <div class="metric-head">
                  <h3>PM10</h3>
                  <span class="unit">µg/m³</span>
                </div>
              </div>
              <div class="metric-meta">
                <span class="trend" aria-live="polite">—</span>
                <span class="badge" data-tone="neutral">Lädt …</span>
              </div>
            </div>
            <p class="status-value"><span class="value">—</span> <span class="unit">µg/m³</span></p>
            <div class="status-notes">
              <p class="status-note">—</p>
              <p class="status-tip">—</p>
            </div>
          </article>
          <article class="status-card skeleton" data-metric="Temperatur" data-chart-target="Temperatur">
            <div class="status-card__top">
              <div class="metric-label">
                <span class="metric-icon" aria-hidden="true"><svg><use href="#icon-thermometer" /></svg></span>
                <div class="metric-head">
                  <h3>Temperatur</h3>
                  <span class="unit">°C</span>
                </div>
              </div>
              <div class="metric-meta">
                <span class="trend" aria-live="polite">—</span>
                <span class="badge" data-tone="neutral">Lädt …</span>
              </div>
            </div>
            <p class="status-value"><span class="value">—</span> <span class="unit">°C</span></p>
            <div class="status-notes">
              <p class="status-note">—</p>
              <p class="status-tip">—</p>
            </div>
          </article>
          <article class="status-card skeleton" data-metric="rel. Feuchte" data-chart-target="rel. Feuchte">
            <div class="status-card__top">
              <div class="metric-label">
                <span class="metric-icon" aria-hidden="true"><svg><use href="#icon-droplet" /></svg></span>
                <div class="metric-head">
                  <h3>rel. Feuchte</h3>
                  <span class="unit">%</span>
                </div>
              </div>
              <div class="metric-meta">
                <span class="trend" aria-live="polite">—</span>
                <span class="badge" data-tone="neutral">Lädt …</span>
              </div>
            </div>
            <p class="status-value"><span class="value">—</span> <span class="unit">%</span></p>
            <div class="status-notes">
              <p class="status-note">—</p>
              <p class="status-tip">—</p>
            </div>
          </article>
          <article class="status-card skeleton optional" data-metric="Luftdruck" data-chart-target="Luftdruck">
            <div class="status-card__top">
              <div class="metric-label">
                <span class="metric-icon" aria-hidden="true"><svg><use href="#icon-gauge" /></svg></span>
                <div class="metric-head">
                  <h3>Luftdruck</h3>
                  <span class="unit">hPa</span>
                </div>
              </div>
              <div class="metric-meta">
                <span class="trend" aria-live="polite">Trend wird ermittelt …</span>
                <span class="badge" data-tone="neutral">Trend</span>
              </div>
            </div>
            <p class="status-value"><span class="value">—</span> <span class="unit">hPa</span></p>
          <div class="status-notes">
          <p class="status-note">—</p>
          <p class="status-tip">—</p>
          </div>
        </article>
        </div>
      </section>

      <section class="insights-section" aria-labelledby="insights-heading" hidden>
        <div class="section-heading">
          <h2 id="insights-heading">Insights</h2>
          <p>Automatische Auswertungen deiner Raumluft.</p>
        </div>
        <div class="insights-grid" id="insights-grid" data-insights-grid></div>
        <div class="insights-actions">
          <button type="button" id="insights-toggle" class="ghost-btn ghost-btn--filled" hidden>Mehr anzeigen</button>
        </div>
      </section>

      <section class="admin-section" aria-labelledby="admin-network-title">
        <div class="section-heading">
          <h2 id="admin-network-title">Admin · Netzwerk</h2>
          <p>WiFi-Einstellungen für ESP aktualisieren (und Pi vorbereitet).</p>
        </div>
        <article class="admin-card" id="admin-network-card">
          <div class="admin-card__grid">
            <div class="form-field">
              <label for="admin-token">Admin-Code (optional)</label>
              <input id="admin-token" name="admin-token" type="password" autocomplete="off" placeholder="Bei Bedarf hier Token eintragen">
              <p class="hint">Nur notwendig, wenn der Server ein Admin-Token erwartet.</p>
            </div>
            <div class="form-field">
              <label for="esp-ssid">ESP SSID</label>
              <input id="esp-ssid" name="esp-ssid" type="text" autocomplete="off" placeholder="Neuer WLAN-Name">
            </div>
            <div class="form-field">
              <label for="esp-password">ESP Passwort</label>
              <input id="esp-password" name="esp-password" type="password" autocomplete="new-password" placeholder="Mindestens 8 Zeichen">
            </div>
            <div class="form-field">
              <label for="pi-ssid">Pi SSID (optional)</label>
              <input id="pi-ssid" name="pi-ssid" type="text" autocomplete="off" placeholder="Experimentell – benötigt Root">
            </div>
            <div class="form-field">
              <label for="pi-password">Pi Passwort (optional)</label>
              <input id="pi-password" name="pi-password" type="password" autocomplete="off" placeholder="Experimentell – benötigt Root">
            </div>
            <div class="form-field form-field--checkbox">
              <label for="esp-flash">
                <input id="esp-flash" name="esp-flash" type="checkbox" checked>
                <span>ESP jetzt OTA flashen</span>
              </label>
              <p class="hint">Startet einen ESPHome-OTA-Flash mit den neuen Daten.</p>
            </div>
          </div>
          <div class="admin-actions">
            <div class="admin-status" id="admin-status" role="status" aria-live="polite">Bereit.</div>
            <div class="admin-buttons">
              <button type="button" id="admin-load" class="ghost-btn">Einstellungen laden</button>
              <button type="button" id="admin-save" class="ghost-btn ghost-btn--filled">Speichern</button>
            </div>
          </div>
        </article>
      </section>

    </main>

    <footer class="app-footer">
      <p>Bereit für Offline & Push – AirGuard Dashboard</p>
    </footer>
  </div>

  <div class="chart-modal" id="chart-modal" role="dialog" aria-modal="true" hidden>
    <div class="chart-modal__backdrop" aria-hidden="true" data-close="true"></div>
    <div class="chart-modal__content" tabindex="-1">
      <header class="modal-header chart-modal__header">
        <div class="modal-header__titles">
          <div class="chart-modal__title-group">
            <h3 id="chart-modal-title">Verlauf</h3>
            <p id="chart-modal-sub" class="chart-modal__sub">—</p>
          </div>
        </div>
        <div class="modal-header__meta">
          <div id="chart-modal-current" class="chart-modal__current" data-tone="neutral">
            <div class="chart-modal__current-main">
              <span id="chart-modal-current-value" class="chart-modal__current-value">—</span>
              <span id="chart-modal-current-unit" class="chart-modal__current-unit">—</span>
            </div>
            <span id="chart-modal-current-label" class="chart-modal__current-label">—</span>
          </div>
          <button type="button" class="chart-modal__close" aria-label="Schließen" data-close="true">×</button>
        </div>
      </header>
      <div class="modal-body chart-modal__body">
        <nav class="modal-range-tabs" role="tablist" aria-label="Zeitfenster">
          <button type="button" role="tab" aria-selected="true" class="modal-tab" data-range="24h">24 h</button>
          <button type="button" role="tab" aria-selected="false" class="modal-tab" data-range="7d">7 Tage</button>
          <button type="button" role="tab" aria-selected="false" class="modal-tab" data-range="30d">30 Tage</button>
        </nav>
        <div class="chart-modal__canvas modal-chart-container">
          <canvas id="chart-modal-canvas" aria-describedby="chart-modal-sub"></canvas>
          <div class="chart-modal__state" id="chart-modal-state" hidden>
            <p id="chart-modal-state-text">Lade Diagramm …</p>
            <button type="button" class="ghost-btn chart-modal__retry" id="chart-modal-retry">Erneut laden</button>
          </div>
        </div>
        <div class="chart-modal__scale metric-scale" id="chart-modal-scale">
          <div class="metric-scale-bar" id="chart-modal-scale-bar">
            <div class="metric-scale-marker" id="chart-modal-scale-marker" aria-hidden="true"></div>
          </div>
          <div class="metric-scale-label-row" id="chart-modal-scale-labels"></div>
          <p id="chart-modal-scale-caption" class="chart-modal__scale-caption">—</p>
        </div>
        <div class="chart-modal__info">
          <dl id="chart-modal-insight" class="chart-modal__insight"></dl>
        </div>
      </div>
    </div>
  </div>

  <div class="circadian-modal" id="circadian-modal" role="dialog" aria-modal="true" hidden>
    <div class="circadian-modal__backdrop" aria-hidden="true" data-close="true"></div>
    <div class="circadian-modal__content" tabindex="-1">
      <header class="modal-header circadian-modal__header">
        <div class="modal-header__titles">
          <h3 id="circadian-modal-title">Circadian Light</h3>
          <p id="circadian-modal-summary" class="circadian-modal__summary">Empfehlungen werden geladen …</p>
        </div>
        <div class="modal-header__meta">
          <span id="circadian-modal-status" class="badge" data-tone="neutral">—</span>
          <button type="button" class="circadian-modal__close" aria-label="Schließen" data-close="true">×</button>
        </div>
      </header>
      <div class="modal-body circadian-modal__body">
        <div class="circadian-modal__charts">
          <div class="circadian-charts-grid">
            <article class="circadian-modal__chart" data-kind="lux">
              <header>
                <h4>Lux</h4>
                <span id="circadian-modal-lux-value" class="circadian-modal__value">—</span>
              </header>
              <canvas id="circadian-modal-lux-canvas" aria-label="Lux Verlauf (24 h)"></canvas>
            </article>
            <article class="circadian-modal__chart" data-kind="cct">
              <header>
                <h4>CCT</h4>
                <span id="circadian-modal-cct-value" class="circadian-modal__value">—</span>
              </header>
              <canvas id="circadian-modal-cct-canvas" aria-label="CCT Verlauf (24 h)"></canvas>
            </article>
          </div>
        </div>
        <div class="circadian-modal__info">
          <section>
            <h4>Bedeutung</h4>
            <p>Lichtstärke (Lux) und Farbtemperatur (K) beeinflussen, wie wach oder entspannt du dich im Raum fühlst. Helles, eher kühles Licht aktiviert und unterstützt Fokus; warmes, gedimmtes Licht hilft beim Runterfahren und bei der Vorbereitung auf den Abend.</p>
            <p>Für ein Wohnzimmer ist tagsüber neutrales bis leicht kühles Licht sinnvoll, abends dagegen eher warmes, deutlich gedimmtes Licht.</p>
          </section>
          <section>
            <h4>Empfehlung (nach Tageszeit)</h4>
            <ul>
              <li><strong>Morgen (07–11 Uhr):</strong> 500–1 000 lx, 5 000–6 500 K<br>Zum Wachwerden und für einen konzentrierten Start in den Tag.</li>
              <li><strong>Tag (11–17 Uhr):</strong> 500–1 000 lx, 4 000–5 500 K<br>Für Arbeiten, Haushalt und Alltag im Wohn- und Esszimmer.</li>
              <li><strong>Abend (17–22 Uhr):</strong> 50–300 lx, 2 700–3 500 K<br>Zum Runterfahren, Essen, Fernsehen und entspannten Feierabend.</li>
              <li><strong>Später Abend (22–24 Uhr):</strong> &lt; 100 lx, 2 400–3 000 K<br>Sehr ruhige, warme Beleuchtung, um müde zu werden.</li>
            </ul>
          </section>
          <section>
            <h4>Verbessern</h4>
            <ul>
              <li>Tagsüber: Deckenleuchte und ggf. Arbeitslampe nutzen, Licht neutral bis leicht kühl einstellen. Blendung vermeiden (Licht nicht direkt in Augen oder auf Bildschirm).</li>
              <li>Abends: Indirekte Lichtquellen (Stehlampe, LED-Strips) nutzen, warmweiße Leuchtmittel wählen und Helligkeit deutlich reduzieren.</li>
              <li>Beim Fernsehen: Leichtes Hintergrundlicht statt komplett dunklem Raum oder einzig hellem Bildschirm – angenehmer und weniger anstrengend.</li>
              <li>Spät abends: Wenn möglich nur noch warmes, sehr gedimmtes Licht nutzen.</li>
            </ul>
          </section>
        </div>
        <div class="circadian-modal__scales">
          <div class="circadian-scale" data-kind="lux">
            <div class="circadian-scale__title-row">
              <span class="circadian-scale__title">Lux-Skala</span>
              <span id="circadian-scale-lux-value" class="circadian-scale__current">—</span>
            </div>
            <div class="metric-scale metric-scale--compact" id="circadian-scale-lux">
              <div class="metric-scale-bar">
                <div class="metric-scale-marker" aria-hidden="true"></div>
              </div>
              <div class="metric-scale-label-row"></div>
              <p id="circadian-scale-lux-caption" class="metric-scale__caption">—</p>
            </div>
          </div>
          <div class="circadian-scale" data-kind="cct">
            <div class="circadian-scale__title-row">
              <span class="circadian-scale__title">CCT-Skala</span>
              <span id="circadian-scale-cct-value" class="circadian-scale__current">—</span>
            </div>
            <div class="metric-scale metric-scale--compact" id="circadian-scale-cct">
              <div class="metric-scale-bar">
                <div class="metric-scale-marker" aria-hidden="true"></div>
              </div>
              <div class="metric-scale-label-row"></div>
              <p id="circadian-scale-cct-caption" class="metric-scale__caption">—</p>
            </div>
          </div>
        </div>
        <footer class="circadian-modal__footer">
          <p>Empfehlungen basieren auf üblichen Innenraum-Leitlinien für komfortables Arbeiten und Entspannen.</p>
        </footer>
      </div>
    </div>
  </div>
</body>
</html>
