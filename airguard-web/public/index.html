<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#ffffff">
  <title>AirGuard Dashboard</title>
  <link rel="manifest" href="./manifest.webmanifest">
  <link rel="icon" type="image/png" href="./assets/logo.png">
  <link rel="stylesheet" href="./styles.css">
  <script defer src="./lib/chart.umd.min.js"></script>
  <script defer src="./lib/chartjs-adapter-date-fns.bundle.min.js"></script>
  <script defer src="./app.js"></script>
</head>
  <body>
  <svg class="icon-sprite" aria-hidden="true">
    <symbol id="icon-cloud" viewBox="0 0 24 24">
      <path d="M7.5 19a4.5 4.5 0 0 1 0-9 5.5 5.5 0 0 1 10.8-1.6A4 4 0 0 1 18 19z" fill="currentColor" />
    </symbol>
    <symbol id="icon-dots" viewBox="0 0 24 24">
      <circle cx="6" cy="6" r="2.4" fill="currentColor" />
      <circle cx="12" cy="6" r="2.4" fill="currentColor" />
      <circle cx="18" cy="6" r="2.4" fill="currentColor" />
      <circle cx="6" cy="12" r="2.4" fill="currentColor" />
      <circle cx="12" cy="12" r="2.4" fill="currentColor" />
      <circle cx="18" cy="12" r="2.4" fill="currentColor" />
      <circle cx="6" cy="18" r="2.4" fill="currentColor" />
      <circle cx="12" cy="18" r="2.4" fill="currentColor" />
      <circle cx="18" cy="18" r="2.4" fill="currentColor" />
    </symbol>
    <symbol id="icon-flask" viewBox="0 0 24 24">
      <path d="M9 3.5h6v1.6l-1.6 2.4v4.2l4.6 7a1.6 1.6 0 0 1-1.3 2.6H7.3A1.6 1.6 0 0 1 6 18.7l4.6-7V7.5L9 5.1z" fill="currentColor" />
    </symbol>
    <symbol id="icon-thermometer" viewBox="0 0 24 24">
      <path d="M13.2 14.9V5.6a1.2 1.2 0 0 0-2.4 0v9.3a3.5 3.5 0 1 0 2.4 0z" fill="currentColor" />
      <path d="M10.8 6h2.4v2.2h-2.4z" fill="currentColor" />
    </symbol>
    <symbol id="icon-droplet" viewBox="0 0 24 24">
      <path d="M12 3.2C9.2 7 6 10.5 6 14a6 6 0 0 0 12 0c0-3.5-3.2-7-6-10.8z" fill="currentColor" />
    </symbol>
    <symbol id="icon-gauge" viewBox="0 0 24 24">
      <path d="M12 4a9 9 0 1 0 9 9h-3a6 6 0 1 1-12 0H3a9 9 0 0 0 9-9z" fill="currentColor" />
      <path d="M12 7a1 1 0 0 0-1 1v5.4l-2.1 2.1a1 1 0 1 0 1.4 1.4l2.5-2.5a1 1 0 0 0 .3-.7V8a1 1 0 0 0-1-1z" fill="#fff" />
    </symbol>
    <symbol id="icon-sun" viewBox="0 0 24 24">
      <circle cx="12" cy="12" r="4.5" fill="currentColor" />
      <path d="M12 2.5a1.2 1.2 0 0 1 1.2 1.2v1.2A1.2 1.2 0 0 1 12 6a1.2 1.2 0 0 1-1.2-1.2V3.7A1.2 1.2 0 0 1 12 2.5zm0 16.5a1.2 1.2 0 0 1 1.2 1.2v1.1a1.2 1.2 0 1 1-2.4 0v-1.1A1.2 1.2 0 0 1 12 19zm9.5-7a1.2 1.2 0 0 1-1.2 1.2h-1.1a1.2 1.2 0 0 1 0-2.4h1.1a1.2 1.2 0 0 1 1.2 1.2zm-16.5 0a1.2 1.2 0 0 1-1.2 1.2H2.7a1.2 1.2 0 0 1 0-2.4h1.1a1.2 1.2 0 0 1 1.2 1.2zm13.9 5.3a1.2 1.2 0 0 1 0 1.7l-.8.8a1.2 1.2 0 0 1-1.7-1.7l.8-.8a1.2 1.2 0 0 1 1.7 0zM7.6 6.5a1.2 1.2 0 0 1 0 1.7l-.8.8A1.2 1.2 0 0 1 5 7.3l.8-.8a1.2 1.2 0 0 1 1.7 0zm0 10.9-1 .9a1.2 1.2 0 0 1-1.7-1.7l.9-1a1.2 1.2 0 1 1 1.7 1.7zm10.9-10.9a1.2 1.2 0 0 1-1.7 0l-.8-.8a1.2 1.2 0 0 1 1.7-1.7l.8.8a1.2 1.2 0 0 1 0 1.7z" fill="currentColor" />
    </symbol>
    <symbol id="icon-gradient-sun" viewBox="0 0 24 24">
      <path d="M12 4a8 8 0 1 1-7.7 6.1h6.6V4.3A8 8 0 0 1 12 4z" fill="currentColor" />
      <path d="M13 4.2v5.9h5.9A8 8 0 0 0 13 4.2z" fill="currentColor" opacity="0.65" />
    </symbol>
  </svg>
  <div class="app-shell">
    <header class="hero" aria-labelledby="hero-title">
      <div class="hero-left">
        <h1 id="hero-title">AirGuard Innenraum-Qualität</h1>
        <p class="hero-sub">Live-Überblick für gesunde Luft & Wohlbefinden</p>
        <div class="health-card" role="status" aria-live="polite">
          <div class="health-ring" aria-hidden="true">
            <svg viewBox="0 0 120 120">
              <defs>
                <linearGradient id="health-gradient" x1="0" y1="1" x2="1" y2="0">
                  <stop offset="0%" stop-color="#06b6d4" />
                  <stop offset="100%" stop-color="#10b981" />
                </linearGradient>
              </defs>
              <circle class="health-bg" cx="60" cy="60" r="54"></circle>
              <circle class="health-progress" cx="60" cy="60" r="54" stroke-dasharray="339.292" stroke-dashoffset="339.292"></circle>
            </svg>
            <div class="health-value">
              <span id="health-score" class="health-score">—</span>
              <span id="health-label" class="health-label">Nicht verfügbar</span>
            </div>
          </div>
          <p id="health-detail" class="health-detail">Werte werden geladen …</p>
          <p id="offline-indicator" class="offline-indicator" hidden>Offline – letzte Daten unbekannt</p>
        </div>
        <div class="hero-actions">
          <button id="install-btn" type="button" class="ghost-btn" hidden>App installieren</button>
          <button id="notify-btn" type="button" class="ghost-btn" hidden>Benachrichtigungen aktivieren</button>
        </div>
      </div>
      <div class="hero-right" aria-labelledby="hero-metrics-title">
        <h2 id="hero-metrics-title" class="section-title">Kernwerte</h2>
        <div class="mini-metric-grid">
          <article class="mini-card skeleton" data-metric="CO2">
            <span class="mini-icon" aria-hidden="true"><svg><use href="#icon-cloud" /></svg></span>
            <div class="mini-meta">
              <h3>CO₂</h3>
              <p class="mini-value">—</p>
              <span class="mini-unit">ppm</span>
            </div>
            <div class="mini-chart" aria-hidden="true">
              <canvas></canvas>
            </div>
          </article>
          <article class="mini-card skeleton" data-metric="PM2.5">
            <span class="mini-icon" aria-hidden="true"><svg><use href="#icon-dots" /></svg></span>
            <div class="mini-meta">
              <h3>PM2.5</h3>
              <p class="mini-value">—</p>
              <span class="mini-unit">µg/m³</span>
            </div>
            <div class="mini-chart" aria-hidden="true">
              <canvas></canvas>
            </div>
          </article>
          <article class="mini-card skeleton" data-metric="TVOC">
            <span class="mini-icon" aria-hidden="true"><svg><use href="#icon-flask" /></svg></span>
            <div class="mini-meta">
              <h3>TVOC</h3>
              <p class="mini-value">—</p>
              <span class="mini-unit">ppb</span>
            </div>
            <div class="mini-chart" aria-hidden="true">
              <canvas></canvas>
            </div>
          </article>
          <article class="mini-card skeleton" data-metric="rel. Feuchte">
            <span class="mini-icon" aria-hidden="true"><svg><use href="#icon-droplet" /></svg></span>
            <div class="mini-meta">
              <h3>rel. Feuchte</h3>
              <p class="mini-value">—</p>
              <span class="mini-unit">%</span>
            </div>
            <div class="mini-chart" aria-hidden="true">
              <canvas></canvas>
            </div>
          </article>
        </div>
        <p class="hero-update">Letzte Aktualisierung: <time id="last-updated">—</time></p>
      </div>
    </header>

    <main class="main-content">
      <section class="status-section" aria-labelledby="status-heading">
        <div class="section-heading">
          <h2 id="status-heading">Statusübersicht</h2>
          <p>Aktuelle Werte mit Komfort- und Qualitätsbewertung</p>
        </div>
        <div class="status-grid">
          <article class="status-card skeleton" data-metric="CO2" data-chart-target="CO2">
            <header>
              <span class="metric-icon" aria-hidden="true"><svg><use href="#icon-cloud" /></svg></span>
              <div class="metric-head">
                <h3>CO₂</h3>
                <span class="badge" data-tone="neutral">Lädt …</span>
              </div>
              <span class="trend" aria-live="polite">—</span>
            </header>
            <p class="status-value"><span class="value">—</span> <span class="unit">ppm</span></p>
            <p class="status-note">—</p>
            <p class="status-tip">—</p>
          </article>
          <article class="status-card skeleton" data-metric="PM2.5" data-chart-target="PM">
            <header>
              <span class="metric-icon" aria-hidden="true"><svg><use href="#icon-dots" /></svg></span>
              <div class="metric-head">
                <h3>PM2.5</h3>
                <span class="badge" data-tone="neutral">Lädt …</span>
              </div>
              <span class="trend" aria-live="polite">—</span>
            </header>
            <p class="status-value"><span class="value">—</span> <span class="unit">µg/m³</span></p>
            <p class="status-note">—</p>
            <p class="status-tip">—</p>
          </article>
          <article class="status-card skeleton" data-metric="TVOC" data-chart-target="TVOC">
            <header>
              <span class="metric-icon" aria-hidden="true"><svg><use href="#icon-flask" /></svg></span>
              <div class="metric-head">
                <h3>TVOC</h3>
                <span class="badge" data-tone="neutral">Lädt …</span>
              </div>
              <span class="trend" aria-live="polite">—</span>
            </header>
            <p class="status-value"><span class="value">—</span> <span class="unit">ppb</span></p>
            <p class="status-note">—</p>
            <p class="status-tip">—</p>
          </article>
          <article class="status-card skeleton" data-metric="Temperatur" data-chart-target="Temperatur">
            <header>
              <span class="metric-icon" aria-hidden="true"><svg><use href="#icon-thermometer" /></svg></span>
              <div class="metric-head">
                <h3>Temperatur</h3>
                <span class="badge" data-tone="neutral">Lädt …</span>
              </div>
              <span class="trend" aria-live="polite">—</span>
            </header>
            <p class="status-value"><span class="value">—</span> <span class="unit">°C</span></p>
            <p class="status-note">—</p>
            <p class="status-tip">—</p>
          </article>
          <article class="status-card skeleton" data-metric="rel. Feuchte" data-chart-target="rel. Feuchte">
            <header>
              <span class="metric-icon" aria-hidden="true"><svg><use href="#icon-droplet" /></svg></span>
              <div class="metric-head">
                <h3>rel. Feuchte</h3>
                <span class="badge" data-tone="neutral">Lädt …</span>
              </div>
              <span class="trend" aria-live="polite">—</span>
            </header>
            <p class="status-value"><span class="value">—</span> <span class="unit">%</span></p>
            <p class="status-note">—</p>
            <p class="status-tip">—</p>
          </article>
          <article class="status-card skeleton" data-metric="Lux">
            <header>
              <span class="metric-icon" aria-hidden="true"><svg><use href="#icon-sun" /></svg></span>
              <div class="metric-head">
                <h3>Lux</h3>
                <span class="badge" data-tone="neutral">Lädt …</span>
              </div>
              <span class="trend" aria-live="polite">—</span>
            </header>
            <p class="status-value"><span class="value">—</span> <span class="unit">lx</span></p>
            <p class="status-note">—</p>
            <p class="status-tip">—</p>
          </article>
          <article class="status-card skeleton" data-metric="Farbtemperatur">
            <header>
              <span class="metric-icon" aria-hidden="true"><svg><use href="#icon-gradient-sun" /></svg></span>
              <div class="metric-head">
                <h3>CCT</h3>
                <span class="badge" data-tone="neutral">Lädt …</span>
              </div>
              <span class="trend" aria-live="polite">—</span>
            </header>
            <p class="status-value"><span class="value">—</span> <span class="unit">K</span></p>
            <p class="status-note">—</p>
            <p class="status-tip">—</p>
          </article>
          <article class="status-card skeleton optional" data-metric="Luftdruck" data-chart-target="Luftdruck">
            <header>
              <span class="metric-icon" aria-hidden="true"><svg><use href="#icon-gauge" /></svg></span>
              <div class="metric-head">
                <h3>Luftdruck</h3>
                <span class="badge" data-tone="neutral">Trend</span>
              </div>
              <span class="trend" aria-live="polite">Trend wird ermittelt …</span>
            </header>
            <p class="status-value"><span class="value">—</span> <span class="unit">hPa</span></p>
            <p class="status-note">—</p>
            <p class="status-tip">—</p>
          </article>
        </div>
      </section>

      <section class="circadian-section" aria-labelledby="circadian-heading">
        <div class="section-heading">
          <h2 id="circadian-heading">Circadian Light</h2>
          <p>Optimierte Beleuchtung nach Tageszeit</p>
        </div>
        <article class="circadian-card skeleton" data-chart-target="Circadian">
          <div class="circadian-main">
            <span class="circadian-icon" aria-hidden="true"><svg><use href="#icon-gradient-sun" /></svg></span>
            <div class="circadian-copy">
              <p class="circadian-phase">Phase wird geladen …</p>
              <h3 class="circadian-status">—</h3>
              <p class="circadian-tip">—</p>
            </div>
          </div>
          <div class="circadian-cycle">
            <div class="cycle-track" aria-hidden="true">
              <span class="cycle-icon cycle-icon--sun" aria-hidden="true">☀</span>
              <span class="cycle-icon cycle-icon--moon" aria-hidden="true">☾</span>
              <span class="cycle-marker" data-period="day">☀</span>
            </div>
            <div class="cycle-labels">
              <span>00:00</span>
              <span id="circadian-cycle-label">—:—</span>
              <span>24:00</span>
            </div>
          </div>
          <div class="circadian-bars">
            <div class="bar-group">
              <div class="bar-label">CCT</div>
              <div class="bar-track" data-kind="cct" data-range-label="Ziel —">
                <span class="bar-range"></span>
                <span class="bar-marker"></span>
              </div>
              <div class="bar-meta">
                <span id="cct-now">— K</span>
                <span id="cct-target">Ziel —</span>
                <span><span id="cct-eval" class="badge" data-tone="neutral">—</span></span>
              </div>
            </div>
            <div class="bar-group">
              <div class="bar-label">Lux</div>
              <div class="bar-track" data-kind="lux" data-range-label="Ziel —">
                <span class="bar-range"></span>
                <span class="bar-marker"></span>
              </div>
              <div class="bar-meta">
                <span id="lux-now">— lx</span>
                <span id="lux-target">Ziel —</span>
                <span><span id="lux-eval" class="badge" data-tone="neutral">—</span></span>
              </div>
            </div>
          </div>
        </article>
      </section>

    </main>

    <footer class="app-footer">
      <p>Bereit für Offline & Push – AirGuard Dashboard</p>
    </footer>
  </div>

  <div class="toast" role="status" aria-live="polite" hidden>
    <span class="toast-text"></span>
    <button type="button" class="toast-close" aria-label="Schließen">×</button>
  </div>

  <div class="chart-modal" id="chart-modal" role="dialog" aria-modal="true" hidden>
    <div class="chart-modal__backdrop" data-close="true"></div>
    <div class="chart-modal__content">
      <button type="button" class="chart-modal__close" aria-label="Schließen" data-close="true">×</button>
      <header class="chart-modal__header">
        <div class="chart-modal__heading">
          <div class="chart-modal__title-group">
            <h3 id="chart-modal-title">Verlauf</h3>
            <p id="chart-modal-sub" class="chart-modal__sub">—</p>
          </div>
          <div id="chart-modal-current" class="chart-modal__current" data-tone="neutral">
            <span id="chart-modal-current-value" class="chart-modal__current-value">—</span>
            <span id="chart-modal-current-unit" class="chart-modal__current-unit">—</span>
            <span id="chart-modal-current-label" class="chart-modal__current-label">—</span>
          </div>
        </div>
      </header>
      <nav class="modal-range-tabs" role="tablist" aria-label="Zeitfenster">
        <button type="button" role="tab" aria-selected="true" class="modal-tab" data-range="24h">24 h</button>
        <button type="button" role="tab" aria-selected="false" class="modal-tab" data-range="7d">7 Tage</button>
        <button type="button" role="tab" aria-selected="false" class="modal-tab" data-range="30d">30 Tage</button>
      </nav>
      <div class="chart-modal__canvas">
        <canvas id="chart-modal-canvas" aria-describedby="chart-modal-sub"></canvas>
      </div>
      <div class="chart-modal__info">
        <dl id="chart-modal-insight" class="chart-modal__insight"></dl>
      </div>
      <div class="chart-modal__scale" id="chart-modal-scale">
        <div id="chart-modal-scale-labels" class="chart-modal__scale-labels"></div>
        <div class="chart-modal__scale-track">
          <div id="chart-modal-scale-gradient" class="chart-modal__scale-gradient"></div>
          <div id="chart-modal-scale-marker" class="chart-modal__scale-marker" data-tone="neutral">
            <span class="chart-modal__scale-marker-dot"></span>
            <span id="chart-modal-scale-marker-value" class="chart-modal__scale-marker-value">—</span>
          </div>
        </div>
        <div id="chart-modal-scale-values" class="chart-modal__scale-values"></div>
        <p id="chart-modal-scale-caption" class="chart-modal__scale-caption">—</p>
      </div>
    </div>
  </div>
</body>
</html>
